# Amazon Redshift 設計チェックリスト

## 1. クラスター基盤設計
- [ ] ノードタイプ選択 (RA3 / DC2 / DS2)
- [ ] ノード数・スケーリング方針
- [ ] Serverless vs Provisioned 選択
- [ ] リージョン・AZ選択
- [ ] クラスター識別子・命名規則
- [ ] パラメータグループ設定
- [ ] メンテナンスウィンドウ設定
- [ ] Redshiftバージョン・トラック選択

## 2. ネットワーク設計
- [ ] VPC選択・サブネット設計
- [ ] サブネットグループ構成
- [ ] セキュリティグループ設定
- [ ] VPCエンドポイント (S3, DynamoDB等)
- [ ] Enhanced VPC Routing有効化
- [ ] パブリック/プライベートアクセス
- [ ] 接続ポート設定 (デフォルト5439)
- [ ] クロスリージョン接続要件

## 3. セキュリティ設計
- [ ] 保管時暗号化 (KMS / HSM)
- [ ] 転送時暗号化 (SSL/TLS)
- [ ] IAMロール設計 (S3, Glue, Lambda連携用)
- [ ] データベースユーザー/グループ設計
- [ ] スキーマ単位権限設計
- [ ] 行レベルセキュリティ (RLS)
- [ ] 列レベルセキュリティ
- [ ] 動的データマスキング
- [ ] 監査ログ設定 (接続/ユーザー/テーブル)
- [ ] Secrets Manager連携

## 4. スキーマ設計
- [ ] スキーマ分割方針 (raw/staging/mart等)
- [ ] 命名規則 (テーブル/カラム/制約)
- [ ] データ型選択ガイドライン
- [ ] NULL許容ポリシー
- [ ] 主キー/外部キー定義 (検証用)
- [ ] デフォルト値設計
- [ ] IDENTITY/GENERATED列設計

## 5. テーブル物理設計
- [ ] 分散スタイル (KEY / EVEN / ALL / AUTO)
- [ ] 分散キー選択基準
- [ ] ソートキー選択 (COMPOUND / INTERLEAVED / AUTO)
- [ ] 圧縮エンコーディング (AZ64, ZSTD, LZO等)
- [ ] ANALYZE COMPRESSION実行方針
- [ ] テーブルサイズ見積もり
- [ ] 一時テーブル利用方針
- [ ] 外部テーブル設計 (Spectrum)

## 6. データロード設計
- [ ] COPY vs INSERT選択基準
- [ ] S3ステージングバケット設計
- [ ] ファイルフォーマット (Parquet / CSV / JSON / ORC)
- [ ] ファイル分割・圧縮戦略
- [ ] マニフェストファイル運用
- [ ] エラーハンドリング (MAXERROR, STL_LOAD_ERRORS)
- [ ] Upsert/Merge戦略
- [ ] ストリーミング取り込み設計
- [ ] Zero-ETL連携 (Aurora, RDS)

## 7. ETL/ELT設計
- [ ] ETLツール選択 (Glue / MWAA / Step Functions / dbt)
- [ ] ジョブスケジューリング設計
- [ ] 依存関係管理
- [ ] 冪等性確保方針
- [ ] トランザクション分離レベル
- [ ] ステージングテーブル運用
- [ ] データ品質チェック組み込み
- [ ] リトライ・エラー通知設計

## 8. パフォーマンス設計
- [ ] WLM (Workload Management) キュー設計
- [ ] SQA (Short Query Acceleration) 設定
- [ ] 同時実行スケーリング設定
- [ ] クエリ優先度ルール
- [ ] クエリタイムアウト設定
- [ ] 結果キャッシュ活用
- [ ] コンパイル済みコードキャッシュ
- [ ] マテリアライズドビュー設計
- [ ] EXPLAIN分析方針

## 9. メンテナンス設計
- [ ] VACUUM戦略 (FULL / SORT ONLY / DELETE ONLY / REINDEX)
- [ ] VACUUM自動化 (Auto Vacuum設定)
- [ ] ANALYZE実行タイミング
- [ ] テーブル再作成 (DEEP COPY) 基準
- [ ] 統計情報更新方針
- [ ] 不要データパージ設計
- [ ] ストレージ使用量監視

## 10. バックアップ/DR設計
- [ ] 自動スナップショット保持期間
- [ ] 手動スナップショット運用
- [ ] クロスリージョンスナップショット
- [ ] RPO/RTO定義
- [ ] リストア手順・訓練計画
- [ ] テーブルレベルリストア方針
- [ ] Serverlessリカバリポイント設計

## 11. モニタリング設計
- [ ] CloudWatchメトリクス選定
- [ ] CloudWatchアラーム設定
- [ ] システムテーブル監視 (STL_, STV_, SVL_, SVV_)
- [ ] クエリモニタリングルール (QMR)
- [ ] パフォーマンスダッシュボード構築
- [ ] 長時間クエリ検知
- [ ] ディスク使用率監視
- [ ] Advisor活用方針

## 12. ログ/監査設計
- [ ] 監査ログS3出力設定
- [ ] ユーザーアクティビティログ
- [ ] 接続ログ
- [ ] ユーザーログ
- [ ] ログ保持期間・ローテーション
- [ ] CloudTrail連携
- [ ] SIEM連携要件

## 13. コスト最適化設計
- [ ] Reserved Instance検討
- [ ] Serverless RPU設定
- [ ] 一時停止/再開スケジュール
- [ ] Spectrum活用 (コールドデータ分離)
- [ ] データ転送コスト最適化
- [ ] 圧縮によるストレージ削減
- [ ] Cost Explorer/Budgets設定

## 14. データ連携設計
- [ ] Redshift Spectrum設計 (外部スキーマ/カタログ)
- [ ] Data Sharing設計 (プロデューサー/コンシューマー)
- [ ] Federated Query設計 (RDS/Aurora連携)
- [ ] Glue Data Catalog連携
- [ ] QuickSight / BI ツール接続
- [ ] Lake Formation連携
- [ ] Lambda UDF設計

## 15. マイグレーション設計
- [ ] 移行元アセスメント (SCT)
- [ ] スキーマ変換計画
- [ ] DMS設定 (CDC / Full Load)
- [ ] データ検証方法
- [ ] 並行稼働期間設計
- [ ] カットオーバー計画
- [ ] ロールバック計画

## 16. 開発/運用プロセス設計
- [ ] 環境分離 (dev/stg/prod)
- [ ] DDL/DMLバージョン管理
- [ ] CI/CDパイプライン
- [ ] コードレビュープロセス
- [ ] 本番デプロイ手順
- [ ] 障害対応フロー
- [ ] ランブック整備

---

*Generated: $(date +%Y-%m-%d)*
